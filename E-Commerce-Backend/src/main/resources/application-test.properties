# ─────────────────────────────────────────────────────────────────────────────
# application-test.properties  –  TEST profile
#
# Uses SQLite for testing with Hibernate 6.x compatible settings
# ─────────────────────────────────────────────────────────────────────────────

# SQLite in-memory for testing – use shared cache so all connections see the same DB
# (plain :memory: gives each connection its own DB, so sequence tables aren't visible)
spring.datasource.url=jdbc:sqlite:file:testdb?mode=memory&cache=shared
spring.datasource.driver-class-name=org.sqlite.JDBC

# Hibernate settings for SQLite with Hibernate 6.x
spring.jpa.database-platform=org.hibernate.community.dialect.SQLiteDialect
spring.jpa.hibernate.ddl-auto=create

# Disable problematic Hibernate features for SQLite
spring.jpa.properties.hibernate.dialect=org.hibernate.community.dialect.SQLiteDialect
spring.jpa.properties.hibernate.jdbc.batch_size=0
spring.jpa.properties.hibernate.order_inserts=false
spring.jpa.properties.hibernate.order_updates=false
spring.jpa.properties.hibernate.jdbc.fetch_size=0

# Logging
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
logging.level.com.masai=INFO
logging.level.org.springframework.web=DEBUG

# Activate the DataSeeder bean (only runs when this profile is active)
app.seed.enabled=true
